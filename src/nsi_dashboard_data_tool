#Utility for checking/debugging dashboard data issues
#!/bin/sh

NEWLINE='
'
  echo "Running Tool For Controller $NS_WDIR" 
  echo $NEWLINE
  echo "Available command line options."
  echo "1. Read RTG file/Check GDF data index/Check valid gdf files/export testrun/Read PCT data etc."
  echo "2. Generate aggregate data."
  echo "3. Generate transpose data."
  echo "4. Read t-digest data."
  echo $NEWLINE
  read -p 'Select Option: ' userOption

  case $userOption in
	1)
		echo "Running command to read rtg file. Further operation types will be revealed."
		java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar pac1.Bean.ReadRTGMessageFile

		;;
	2)
		read -p "Running command to generate aggregate data. Run command in background (true/false): " isDeamon 
		read -p "Please enter one-liner inputs as <debug (0-4)>  <testrun (numeric)>  <start-date (MM/dd/yyyy)> <end-date (MM/dd/yyyy)>  <testrun interval (ms)> <aggregate resolution In hr (1/2/../6/12/24)> :" aggrOption
		
		echo "Input Options = $aggrOption"
		if [ $isDeamon == true ]
		then
			echo "Running command in background. Check /tmp/log.out for command logs."
			nohup java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-api-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-log4j12-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/log4j-1.2.16.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/tdigest-0.0.1-SNAPSHOT.jar pac1.Bean.dashboard.data.tool.StartRTGDataAggregationTool $aggrOption &> /tmp/log.out&
		else
			java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-api-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-log4j12-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/log4j-1.2.16.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/tdigest-0.0.1-SNAPSHOT.jar pac1.Bean.dashboard.data.tool.StartRTGDataAggregationTool $aggrOption
		fi
		;;

        3)
                read -p "Running command to generate transpose data. Run command in background (true/false): " isDeamon
                read -p "Please enter one-liner inputs as <debug (0-4)>  <testrun (numeric)>  <start-date (MM/dd/yyyy)> <end-date (MM/dd/yyyy)>  <Transpose Mode (0/1) 0 - Normal Partition, 1 - Aggregate partition> <Only for aggregate mode. Aggregate Resolution In hr (1/2/../6/12/24)> :" transposeOption

		echo "Input Options = $transposeOption"
                if [ $isDeamon == true ]
                then
                        echo "Running command in background. Check /tmp/log.out for command logs."
                        nohup java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-api-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-log4j12-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/log4j-1.2.16.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/tdigest-0.0.1-SNAPSHOT.jar pac1.Bean.dashboard.data.tool.CavTransposeFile $transposeOption &> /tmp/log.out&
                else
                        java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-api-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/slf4j-log4j12-1.5.8.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/log4j-1.2.16.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/tdigest-0.0.1-SNAPSHOT.jar pac1.Bean.dashboard.data.tool.CavTransposeFile $transposeOption
                fi
                ;;
        4)
                echo "Running command to read t-digest data. Further operation types will be revealed."
		java -cp $NS_WDIR/webapps/DashboardServer/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/tdigest-0.0.1-SNAPSHOT.jar pac1.Bean.DevCommonUtility 
                ;;

	*)
		echo "Please enter valid option."
		;;
  esac


