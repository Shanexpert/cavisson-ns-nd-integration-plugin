# Name      : nsu_script_tool
# Author    : Saloni Tyagi
# Purpsose  : performs all operations done on flow files from script gui and as nsu_script_tool.
# Usage     : nsu_script_tool [-s proj/subProject/script Name] [-o GetScriptType|GetScriptSubType|AllFlowList|AllPageList|ValidateFlow|CreateFlow|UsedFlowList|FindFlowNameByPage|ShowTxListFromFlow|ShowTxListAllFlow|ShowTxListFromUsedFlow|RenameFlow|DeleteFlow|CreateScript] [-D to enable debug log]   
# e.g.  
#
# Modification History:
# Previously Shell program was handling various operations, Now ScriptFlowUtils is taking care of all operations
# 12/09/11: Saloni - Initial version
#!/bin/sh
USER_NAME=`whoami 2>/dev/null`
COMMAND_LINE=$*
while getopts :U: arg
do
  case $arg in
    U) USER_NAME=$OPTARG
     ;;
  esac
done
FIND=`echo $COMMAND_LINE | grep "\-U"`
if [ "X$FIND" = "X" ];then
    COMMAND_LINE=`echo $COMMAND_LINE "-U $USER_NAME"`
fi
if [ $? != 0 ];then
  echo "Error: Unable to get the real user name"
  exit 1
fi


#Check and get script type and call appropriate class
if [ -d /home/cavisson/monitors ];then
  java -Djava.awt.headless=true -cp $NS_WDIR/webapps/netstorm/WEB-INF/lib/netstorm_bean.jar:/home/cavisson/monitors/lib/java-getopt-1.0.9.jar:$NS_WDIR/webapps/netstorm/lib/runlogic.jar:$NS_WDIR/webapps/netstorm/lib/cglib-nodep-2.2.jar:$NS_WDIR/webapps/netstorm/lib/dom4j-1.6.1.jar:$NS_WDIR/webapps/netstorm/lib/jdom-1.1.3.jar:$NS_WDIR/webapps/netstorm/lib/jdom2-2.0.5.jar:$NS_WDIR/webapps/netstorm/lib/jettison-1.2.jar:$NS_WDIR/webapps/netstorm/lib/joda-time-1.6.jar:$NS_WDIR/webapps/netstorm/lib/kxml2-2.3.0.jar:$NS_WDIR/webapps/netstorm/lib/kxml2-min-2.3.0.jar:$NS_WDIR/webapps/netstorm/lib/stax-1.2.0.jar:$NS_WDIR/webapps/netstorm/lib/stax-api-1.0.1.jar:$NS_WDIR/webapps/netstorm/lib/wstx-asl-3.2.7.jar:$NS_WDIR/webapps/netstorm/lib/xmlpull-1.1.3.1.jar:$NS_WDIR/webapps/netstorm/lib/xom-1.1.jar:$NS_WDIR/webapps/netstorm/lib/xpp3_min-1.1.4c.jar:$NS_WDIR/webapps/netstorm/lib/xstream-1.4.8.jar:$NS_WDIR/webapps/netstorm/lib/swingx-all-1.6.4.jar -DNS_WDIR=$NS_WDIR pac1.Bean.ScriptFlowUtils $COMMAND_LINE 2>>$NS_WDIR/webapps/netstorm/temp/script_validation.log
else
  java -Djava.awt.headless=true -cp $NS_WDIR/webapps/netstorm/WEB-INF/lib/netstorm_bean.jar:/opt/cavisson/monitors/lib/java-getopt-1.0.9.jar:$NS_WDIR/webapps/netstorm/lib/runlogic.jar:$NS_WDIR/webapps/netstorm/lib/cglib-nodep-2.2.jar:$NS_WDIR/webapps/netstorm/lib/dom4j-1.6.1.jar:$NS_WDIR/webapps/netstorm/lib/jdom-1.1.3.jar:$NS_WDIR/webapps/netstorm/lib/jdom2-2.0.5.jar:$NS_WDIR/webapps/netstorm/lib/jettison-1.2.jar:$NS_WDIR/webapps/netstorm/lib/joda-time-1.6.jar:$NS_WDIR/webapps/netstorm/lib/kxml2-2.3.0.jar:$NS_WDIR/webapps/netstorm/lib/kxml2-min-2.3.0.jar:$NS_WDIR/webapps/netstorm/lib/stax-1.2.0.jar:$NS_WDIR/webapps/netstorm/lib/stax-api-1.0.1.jar:$NS_WDIR/webapps/netstorm/lib/wstx-asl-3.2.7.jar:$NS_WDIR/webapps/netstorm/lib/xmlpull-1.1.3.1.jar:$NS_WDIR/webapps/netstorm/lib/xom-1.1.jar:$NS_WDIR/webapps/netstorm/lib/xpp3_min-1.1.4c.jar:$NS_WDIR/webapps/netstorm/lib/xstream-1.4.8.jar:$NS_WDIR/webapps/netstorm/lib/swingx-all-1.6.4.jar -DNS_WDIR=$NS_WDIR pac1.Bean.ScriptFlowUtils $COMMAND_LINE 2>>$NS_WDIR/webapps/netstorm/temp/script_validation.log
fi
