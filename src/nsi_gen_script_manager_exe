#! /bin/sh
#this shell is for internal use only 
#for developers to help making exe at controller 
LAUNCH4J=$NS_WDIR/thirdparty/tools/launch4j/launch4j.jar
#CONFIG=`egrep "^CONFIG" $HOME_DIR/etc/cav.conf | awk '{print $2}'`
CONFIG=`nsi_show_config -s | head -1`
SUB_TYPE=`nsi_show_config -s | head -2|tail -1`
echo $CONFIG
echo $SUB_TYPE
shopt -s nocasematch
PRODUCT_TYPE=netstorm
if [ $CONFIG == "NDE" ];then
   if [[ $SUB_TYPE == "NVSM" ]];then 
   PRODUCT_TYPE=nvsm
   else 
   PRODUCT_TYPE=netdiagnostics
   fi	

elif [ $CONFIG == "NS" ]; then
   if [[ $SUB_TYPE == "NT" ]];then
   PRODUCT_TYPE=nettest
   else
   PRODUCT_TYPE=netstorm
   fi

else
   case $CONFIG in 
        NC)
                PRODUCT_TYPE="netcloud"
                break
                ;;
        "NS>NO")
               PRODUCT_TYPE=netstorm
                break
                ;;
        NO)
               PRODUCT_TYPE="netocean"
                break
                ;;
        NF)
                PRODUCT_TYPE="netfunction"
                break
                ;;
        NV)
                PRODUCT_TYPE="netvision"
                break
                ;;
        NCH)
                PRODUCT_TYPE="netchannel"
                break
                ;;
        *)
                echo "Incorrect configuration"
				
	esac


fi

echo $PRODUCT_TYPE
XML_PATH=$NS_WDIR/webapps/$PRODUCT_TYPE/recorder
cd $XML_PATH
ant -f $XML_PATH/scriptManagerJar.xml
java -jar $LAUNCH4J $XML_PATH/scriptManagerExe.xml
rm -f $XML_PATH/ScriptManager.jar

#type signcode
#if [ $? == 0 ];then
#   echo "pass"
#else
#   echo "fail"
#fi

