#!/bin/sh
#Name : nsi_gui_tool
#Author : Pooja Singh
#Purpose : 
#This shell is tool for some conversion operation like templates converted from rtpl to json.
#This shell also take one input for selecting which operation user want to perform

echo "Enter the option for operation. Options for operations can be:"
echo "1 for conversion of templates from rptl to json"
echo "2 for conversion of avilable report list from info.log file to avilableinfo.json file"
read TOOL_OPTION

if [ "XX$NS_WDIR" == "XX" ];then
  echo "NS_WDIR must be defined"
  exit 1
fi

#TOOL_OPTION=$1

migrate_template_to_json()
{
java -cp $CLASSPATH:$NS_WDIR/webapps/netstorm/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/netstorm/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/web-dashboard-bean.jar:$NS_WDIR/webapps/netstorm/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/dashboardserver.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/gson-2.2.2.jar -DNS_WDIR=$NS_WDIR -Djava.awt.headless=true pac1.Bean.Reports.TemplateJsonConverterTool

if [ $? == "0" ];then
   echo "Templates are converted successfully."
   exit 0
fi

echo "Error in Templates Conversion."
}

migrate_infolog_to_availableInfo()
{
java -cp $CLASSPATH:$NS_WDIR/webapps/netstorm/WEB-INF/lib/kryo-2.23.0.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/java-json.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/json_simple-1.1.jar:$NS_WDIR/webapps/netstorm/WEB-INF/lib/netstorm_bean.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/web-dashboard-bean.jar:$NS_WDIR/webapps/netstorm/lib/commons-io-2.2.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/dashboardserver.jar:$NS_WDIR/webapps/DashboardServer/WEB-INF/lib/gson-2.2.2.jar -DNS_WDIR=$NS_WDIR -Djava.awt.headless=true com.cavisson.gui.server.webreports.services.StatReportGenerator $TEST_RUN_NUM $MODE
}

case $TOOL_OPTION in
	1)
		echo "Templates from rtpl is going to convert in json."
		migrate_template_to_json
		;;
	2)
	    read -p "Enter Test Run Number :" TEST_RUN_NUM
		read -p "Enter mode 0-for single dc and 1-for multi dc :" MODE
		echo "Available List of reports converting into json file from info.log file"
		migrate_infolog_to_availableInfo
		;;
	*)
        echo "Invaild option."	
		exit 1
		;;
esac

